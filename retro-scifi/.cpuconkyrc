-- Conky configuration for 16-core CPU display with percentage circles
-- For AMD 7800X3D processor

conky.config = {
    -- Window settings
    alignment = 'middle_left',
    gap_x = 25,
    gap_y = 0,  -- Centered vertically
    minimum_height = 600, -- Approximately 2/3 of a 1080p screen
    minimum_width = 400,
    maximum_width = 400,
    
    -- Appearance
    background = false,
    border_width = 1,
    draw_borders = false,
    draw_graph_borders = true,
    draw_outline = false,
    draw_shades = false,
    own_window = true,
    own_window_class = 'Conky',
    own_window_type = 'desktop',
    own_window_transparent = true,
    own_window_hints = 'undecorated,below,sticky,skip_taskbar,skip_pager',
    own_window_argb_visual = true,
    own_window_argb_value = 0,
    
    -- Text styling
    use_xft = true,
    font = 'Share Tech Mono:size=10',
    uppercase = false,
    override_utf8_locale = true,
    
    -- Colors
    default_color = '#FFE863',  -- yellow
    color1 = '#FFE863',         -- yellow for headings
    color2 = '#47B5FF',         -- blue for normal
    color3 = '#FF9933',         -- orange for high usage
    color4 = '#FF5252',         -- red for critical
    
    -- Refresh rate
    update_interval = 1.0,
    
    -- Misc
    double_buffer = true,
    no_buffers = true,
    text_buffer_size = 2048,
};

conky.text = [[
${alignc}${color1}${font Share Tech Mono:bold:size=16}COMPUTE${font}
${alignc}${color1}AMD RYZEN 7800X3D${color2}
${color1}${hr 2}

${voffset 10}${color1}TOTAL CPU: ${alignr}${if_match ${cpu cpu0}<85}${color2}${cpu cpu0}%${else}${color3}${cpu cpu0}%${endif}
${voffset 2}${color2}${cpubar cpu0 10,380}

${voffset 10}${color1}TEMPERATURE: ${alignr}${if_match ${execi 5 sensors | grep 'Tctl' | awk '{print $2}' | cut -c2- | cut -f1 -d"."}<70}${color2}${execi 5 sensors | grep 'Tctl' | awk '{print $2}' | cut -c2-}${else}${color3}${execi 5 sensors | grep 'Tctl' | awk '{print $2}' | cut -c2-}${endif}
${voffset 5}${color1}${hr 2}

${voffset 5}${color1}${alignc}CORE ACTIVITY

# Row 1 - Cores 1-4
${voffset 10}
${goto 40}${color1}CORE 01${goto 130}${color1}CORE 02${goto 220}${color1}CORE 03${goto 310}${color1}CORE 04
${goto 40}${if_match ${cpu cpu1}<50}${color2}${else}${if_match ${cpu cpu1}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu1 40,40 47B5FF FFE863 -t}${goto 130}${if_match ${cpu cpu2}<50}${color2}${else}${if_match ${cpu cpu2}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu2 40,40 47B5FF FFE863 -t}${goto 220}${if_match ${cpu cpu3}<50}${color2}${else}${if_match ${cpu cpu3}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu3 40,40 47B5FF FFE863 -t}${goto 310}${if_match ${cpu cpu4}<50}${color2}${else}${if_match ${cpu cpu4}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu4 40,40 47B5FF FFE863 -t}
${goto 50}${if_match ${cpu cpu1}<50}${color2}${else}${if_match ${cpu cpu1}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu1}%${goto 140}${if_match ${cpu cpu2}<50}${color2}${else}${if_match ${cpu cpu2}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu2}%${goto 230}${if_match ${cpu cpu3}<50}${color2}${else}${if_match ${cpu cpu3}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu3}%${goto 320}${if_match ${cpu cpu4}<50}${color2}${else}${if_match ${cpu cpu4}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu4}%

# Row 2 - Cores 5-8
${voffset 15}
${goto 40}${color1}CORE 05${goto 130}${color1}CORE 06${goto 220}${color1}CORE 07${goto 310}${color1}CORE 08
${goto 40}${if_match ${cpu cpu5}<50}${color2}${else}${if_match ${cpu cpu5}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu5 40,40 47B5FF FFE863 -t}${goto 130}${if_match ${cpu cpu6}<50}${color2}${else}${if_match ${cpu cpu6}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu6 40,40 47B5FF FFE863 -t}${goto 220}${if_match ${cpu cpu7}<50}${color2}${else}${if_match ${cpu cpu7}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu7 40,40 47B5FF FFE863 -t}${goto 310}${if_match ${cpu cpu8}<50}${color2}${else}${if_match ${cpu cpu8}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu8 40,40 47B5FF FFE863 -t}
${goto 50}${if_match ${cpu cpu5}<50}${color2}${else}${if_match ${cpu cpu5}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu5}%${goto 140}${if_match ${cpu cpu6}<50}${color2}${else}${if_match ${cpu cpu6}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu6}%${goto 230}${if_match ${cpu cpu7}<50}${color2}${else}${if_match ${cpu cpu7}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu7}%${goto 320}${if_match ${cpu cpu8}<50}${color2}${else}${if_match ${cpu cpu8}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu8}%

# Row 3 - Cores 9-12
${voffset 15}
${goto 40}${color1}CORE 09${goto 130}${color1}CORE 10${goto 220}${color1}CORE 11${goto 310}${color1}CORE 12
${goto 40}${if_match ${cpu cpu9}<50}${color2}${else}${if_match ${cpu cpu9}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu9 40,40 47B5FF FFE863 -t}${goto 130}${if_match ${cpu cpu10}<50}${color2}${else}${if_match ${cpu cpu10}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu10 40,40 47B5FF FFE863 -t}${goto 220}${if_match ${cpu cpu11}<50}${color2}${else}${if_match ${cpu cpu11}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu11 40,40 47B5FF FFE863 -t}${goto 310}${if_match ${cpu cpu12}<50}${color2}${else}${if_match ${cpu cpu12}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu12 40,40 47B5FF FFE863 -t}
${goto 50}${if_match ${cpu cpu9}<50}${color2}${else}${if_match ${cpu cpu9}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu9}%${goto 140}${if_match ${cpu cpu10}<50}${color2}${else}${if_match ${cpu cpu10}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu10}%${goto 230}${if_match ${cpu cpu11}<50}${color2}${else}${if_match ${cpu cpu11}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu11}%${goto 320}${if_match ${cpu cpu12}<50}${color2}${else}${if_match ${cpu cpu12}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu12}%

# Row 4 - Cores 13-16
${voffset 15}
${goto 40}${color1}CORE 13${goto 130}${color1}CORE 14${goto 220}${color1}CORE 15${goto 310}${color1}CORE 16
${goto 40}${if_match ${cpu cpu13}<50}${color2}${else}${if_match ${cpu cpu13}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu13 40,40 47B5FF FFE863 -t}${goto 130}${if_match ${cpu cpu14}<50}${color2}${else}${if_match ${cpu cpu14}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu14 40,40 47B5FF FFE863 -t}${goto 220}${if_match ${cpu cpu15}<50}${color2}${else}${if_match ${cpu cpu15}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu15 40,40 47B5FF FFE863 -t}${goto 310}${if_match ${cpu cpu16}<50}${color2}${else}${if_match ${cpu cpu16}<85}${color3}${else}${color4}${endif}${endif}${cpugraph cpu16 40,40 47B5FF FFE863 -t}
${goto 50}${if_match ${cpu cpu13}<50}${color2}${else}${if_match ${cpu cpu13}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu13}%${goto 140}${if_match ${cpu cpu14}<50}${color2}${else}${if_match ${cpu cpu14}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu14}%${goto 230}${if_match ${cpu cpu15}<50}${color2}${else}${if_match ${cpu cpu15}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu15}%${goto 320}${if_match ${cpu cpu16}<50}${color2}${else}${if_match ${cpu cpu16}<85}${color3}${else}${color4}${endif}${endif}${cpu cpu16}%

${voffset 15}${color1}${hr 2}
${alignc}${color1}ACTIVE CORES: ${color2}${execi 1 grep -c '^processor' /proc/cpuinfo}/${execi 1 nproc --all}
${alignc}${color1}${font Share Tech Mono:size=10}CLOCK: ${color2}${freq_g} GHz
]];